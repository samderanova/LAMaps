import gpxpy.gpx
import base64

def make_gpx(coords: list[tuple[int,int]]):
    gpx_obj = gpxpy.gpx.GPX()

    gpx_track  = gpxpy.gpx.GPXTrack()

    gpx_obj.tracks.append(gpx_track)

    # Create first segment in our GPX track:
    gpx_segment = gpxpy.gpx.GPXTrackSegment()
    gpx_track.segments.append(gpx_segment)

    # Create points:
    for lat, lon in coords:
        gpx_segment.points.append(gpxpy.gpx.GPXTrackPoint(lat, lon))

    return gpx_obj.to_xml()

def b64encode(string: str):
    encoded_bytes = base64.b64encode(string.encode("utf-8"))
    return encoded_bytes.decode("utf-8")

if __name__ == "__main__":
    points = [[35.73285652173913,-117.67788183516483],[35.71836376811594,-117.6595668168498],[35.240102898550724,-117.51304667032966],[34.42850869565217,-116.853706010989],[34.022711594202896,-116.17605033333332],[33.84879855072464,-115.58996974725274],[33.80532028985507,-115.31524447252747],[33.79082753623188,-115.11377927106227],[33.77633478260869,-114.87568403296703],[33.79082753623188,-114.67421883150182],[33.80532028985507,-114.5460137032967],[33.87778405797101,-114.16139831868131],[34.16763913043478,-113.4471126043956],[34.761842028985505,-112.73282689010988],[35.84879855072464,-112.27495143223443],[36.93575507246376,-112.49473165201465],[37.68937826086956,-113.13575729304029],[38.10966811594203,-113.90498806227106],[38.225610144927536,-114.3445485018315],[38.25459565217391,-114.52769868498167],[38.2690884057971,-114.65590381318681],[38.28358115942029,-115.02220417948718],[38.2690884057971,-115.20535436263735],[38.25459565217391,-115.33355949084249],[38.21111739130434,-115.62659978388278],[38.08068260869565,-116.12110527838827],[37.71836376811594,-116.79876095604395],[36.95024782608695,-117.43978659706958],[36.93575507246376,-117.43978659706958],[36.921262318840576,-117.38484154212453],[36.95024782608695,-117.43978659706958],[36.921262318840576,-117.43978659706958],[36.93575507246376,-117.43978659706958],[36.921262318840576,-117.38484154212453],[36.921262318840576,-117.43978659706958],[35.73285652173913,-117.67788183516483]]
    gpx_str = make_gpx(points)
    with open("test.gpx", "w") as f:
        f.write(gpx_str)